<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ランダムデートプラン</title>
  <style>
    .plan-container {
      max-width: 600px;
      margin: 0 auto;
    }
    .plan {
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      text-align: center;
    }
    .plan-header {
      font-weight: bold;
      font-size: 1.2em;
      margin-bottom: 10px;
      color: #333;
    }
    .spot-details {
      margin: 10px 0;
    }
    .button-group {
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .button {
      background-color: #2196F3;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    .confirm-button {
      background-color: #4CAF50;
      padding: 10px 20px;
      font-size: 1.1em;
    }
    .back-button {
      text-align: center;
      margin-bottom: 20px;
    }
    .update-spots-button {
      text-align: center;
      margin-top: 20px;
    }
    .bottom-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <header>
    <h1 style="text-align: center;">ランダムデートプラン</h1>
  </header>
  <main>
    <div class="back-button">
      <a href="#" th:href="@{/dateMaster/back}">戻る</a>
    </div>

	<div class="plan-container">
	    <div th:each="spot, iterStat : ${spots}" th:if="${iterStat.index < planCount}" class="plan">
	      <div class="plan-header">
	        <span th:text="${iterStat.index == 0 ? 'メインスポット' :
	                      (iterStat.index == 1 ? 'サブスポット1' : 'サブスポット2')}">スポット種別</span>
	      </div>

        <a th:href="@{/spot/details(spotId=${spot.spotId})}">
          <img src="https://via.placeholder.com/250x200" th:alt="${spot.spotName}" style="max-width: 100%; height: auto;">
        </a>

        <div class="spot-details">
          <p>スポット名: <span th:text="${spot.spotName}"></span></p>
          <p>住所: <span th:text="${spot.spotAddress}"></span></p>
          <p>カテゴリ: <span th:text="${spot.description}"></span></p>
        </div>

        <div class="button-group">
          <th:block th:with="spotType=${iterStat.index == 0 ? 'メインスポット' :
                               (iterStat.index == 1 ? 'サブスポット1' : 'サブスポット2')}">
              <a th:href="@{/change_spot(
                  spotId=${spot.spotId}, 
                  spotType=${spotType}, 
                  destination=${destination}, 
                  weather=${weather}
              )}" class="button change-button">
                  スポット変更
              </a>
          </th:block>
        </div>
      </div>

      <div class="bottom-buttons">
        <a th:href="@{/update_additional_spots(destination=${destination}, weather=${weather})}" class="button">
          スポット更新
        </a>
        <form th:action="@{/confirm_plan}" method="post">
          <input type="hidden" name="destination" th:value="${destination}">
          <input type="hidden" name="weather" th:value="${weather}">
          <button type="submit" class="button confirm-button">このプランで確定！</button>
        </form>
      </div>
    </div>
  </main>
</body>
</html>
