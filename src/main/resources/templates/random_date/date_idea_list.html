<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ランダムデートプラン</title>
	<style>
		body {
			font-family: 'Helvetica Neue', Arial, sans-serif;
			margin: 0;
			padding: 20px;
			background-color: #f5f5f5;
		}

		.plan-container {
			max-width: 800px;
			margin: 0 auto;
		}

		.plan {
			border: 2px solid #e0e0e0;
			border-radius: 10px;
			padding: 20px;
			margin-bottom: 30px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			background-color: white;
		}

		.plan-header {
			font-weight: bold;
			font-size: 1.2em;
			margin-bottom: 15px;
			color: #333;
			text-align: center;
		}

		.spot-image-container {
			text-align: center;
			margin-bottom: 20px;
		}

		.spot-image {
			width: 300px;
			height: 225px;
			object-fit: cover;
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			transition: transform 0.3s ease;
		}

		.spot-image:hover {
			transform: scale(1.05);
		}

		.spot-details {
			margin: 15px 0;
			text-align: center;
		}

		.button-group {
			display: flex;
			justify-content: center;
			gap: 10px;
			margin-top: 15px;
		}

		.button {
			background-color: #4299e1;
			color: white;
			border: none;
			padding: 10px 20px;
			border-radius: 5px;
			cursor: pointer;
			text-decoration: none;
			transition: background-color 0.3s ease;
		}

		.button:hover {
			background-color: #3182ce;
		}

		.confirm-button {
			background-color: #48bb78;
			padding: 12px 24px;
			font-size: 1.1em;
		}

		.confirm-button:hover {
			background-color: #38a169;
		}

		.back-button {
			text-align: center;
			margin-bottom: 30px;
		}

		.bottom-buttons {
			display: flex;
			justify-content: center;
			gap: 20px;
			margin-top: 40px;
		}
	</style>
</head>

<body>
	<header>
		<h1 style="text-align: center;">ランダムデートプラン</h1>
	</header>
	<main>
		<div class="back-button">
			<form th:action="@{/dateMaster/date_confirm}" method="post">
				<input type="hidden" name="destination" th:value="${destination}">
				<input type="hidden" name="weather" th:value="${weather}">
				<input type="hidden" name="planCount" th:with="count=${session.selectedPlanCount}" th:value="${count}">
				<button type="submit" class="button">戻る</button>
			</form>
		</div>

		<div class="plan-container">
			<th:block th:each="spot, iterStat : ${spots}">
				<div th:if="${iterStat.index < planCount}" class="plan">
					<div class="plan-header">
						<span th:text="${iterStat.index == 0 ? 'メインスポット' :
                          (iterStat.index == 1 ? 'サブスポット1' : 'サブスポット2')}">スポット種別</span>
					</div>

					<div class="spot-image-container">
						<img th:src="@{/spot_images/{name}.jpg(name=${spot.spotName})}" th:alt="${spot.spotName}"
							class="spot-image">
					</div>

					<div class="spot-details">
						<p>スポット名: <span th:text="${spot.spotName}"></span></p>
						<p>住所: <span th:text="${spot.spotAddress}"></span></p>
						<p>カテゴリ: <span th:text="${spot.description}"></span></p>
					</div>

					<div class="button-group">
						<th:block th:with="spotType=${iterStat.index == 0 ? 'メインスポット' :
                                 (iterStat.index == 1 ? 'サブスポット1' : 'サブスポット2')}">
							<a th:href="@{/change_spot(
                  spotId=${spot.spotId},
                  spotType=${spotType},
                  destination=${destination},
                  weather=${weather}
              )}" class="button change-button">
								スポット変更
							</a>
						</th:block>
					</div>
				</div>
			</th:block>

			<div class="bottom-buttons">
				<a th:href="@{/update_additional_spots(destination=${destination}, weather=${weather})}" class="button">
					スポット更新
				</a>
				<form th:action="@{/confirm_plan}" method="post">
					<input type="hidden" name="destination" th:value="${destination}">
					<input type="hidden" name="weather" th:value="${weather}">
					<button type="submit" class="button confirm-button">このプランで確定！</button>
				</form>
			</div>
		</div>
	</main>
</body>

</html>