<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>デートプラン作成画面</title>
  <script>
    // スポットフォームを動的に作成
    function addSpotForm() {
      const spotFormContainer = document.getElementById("spotFormContainer");

      const newSpotForm = document.createElement("div");
      newSpotForm.classList.add("spot-form");

      newSpotForm.innerHTML = `
        <label for="spotName">スポット名:</label>
        <input type="text" name="spotNames[]" required>

        <label for="spotDescription">スポット詳細:</label>
        <input type="text" name="spotDescriptions[]" required>

        <label for="spotAddress">スポット住所:</label>
        <input type="text" name="spotAddresses[]" required>

        <label for="spotOpening">開館時間:</label>
        <input type="text" name="spotOpenings[]" required>

        <button type="button" onclick="removeSpotForm(this)">削除</button>
        <br><br>
      `;

      spotFormContainer.appendChild(newSpotForm);
    }

    // フォーム削除
    function removeSpotForm(button) {
      const spotFormContainer = document.getElementById("spotFormContainer");
      spotFormContainer.removeChild(button.parentElement);
    }

    // サーバーから受け取ったスポット情報をフォームに追加
    function addSpotToForm(spotId, spotName, description, address, openingHours) {
      const spotFormContainer = document.getElementById("spotFormContainer");

      const newSpotForm = document.createElement("div");
      newSpotForm.classList.add("spot-form");

      newSpotForm.innerHTML = `
        <label for="spotName">スポット名:</label>
        <input type="text" name="spotNames[]" value="${spotName}" required>

        <label for="spotDescription">スポット詳細:</label>
        <input type="text" name="spotDescriptions[]" value="${description}" required>

        <label for="spotAddress">スポット住所:</label>
        <input type="text" name="spotAddresses[]" value="${address}" required>

        <label for="spotOpening">開館時間:</label>
        <input type="text" name="spotOpenings[]" value="${openingHours}" required>

        <button type="button" onclick="removeSpotForm(this)">削除</button>
        <br><br>
      `;

      spotFormContainer.appendChild(newSpotForm);
    }
  </script>
</head>
<body>
  <header>
    <h1>デートプラン作成</h1>
  </header>

  <main>
    <button type="button" onclick="history.back()">戻る</button>

    <div id="spotFormContainer">
      <!-- 動的に追加されたスポットフォーム -->
    </div>

    <!-- スポット検索ページへのリンク -->
    <a href="#" onclick="window.location.href='/searchSpots';">
      <button type="button">スポットを追加</button>
    </a>

    <br><br>

    <form action="/createDatePlan" method="post">
      <div class="button-group">
        <button type="submit">作成</button>
      </div>
    </form>
  </main>
</body>
</html>
